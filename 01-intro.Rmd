# Upstream data processing

To perform multiple analysis with tidymass shinyapp, you need to upload files first, the demo data can be downloaeded [here](https://drive.google.com/file/d/10OmQjZApoqJcd163X5C67pij2yZGWHnF/view?usp=sharing).

![](figures/demo_data.png)

## Methods to upload the files

To begin with, you need to set up the working directory and upload the required files. Here we have three options to upload the files.

**Start with Ms file**: If your data is in raw format, you may first convert it to .mgf format using HPC_tidymass. Then click on ‘Start with Ms file’ to upload the file.

![](figures/select_ms.png)
**Start with table file**: If your data is a post-peak metabolite expression matrix, you can click on the ‘Start with table file’ button to upload the data. The sample table is as follows, and the first four columns must exist, with column names not to be changed. 

![](figures/table_upload.png)

**Start with massdataset object**: If your data is generated by tidymass, you can choose the ‘Start with massdataset object’ button to upload your data as below.

![](figures/object_page.png)

![](figures/object_upload.png)

## Project initiate

Here are the steps you need to follow to initiate the project:

1. Set working directory
2. Upload sample_info.csv file
3. You may click the dropdown button and adjust the column names if there are any changes for them.
4. Click "INITIALIZE PROJECT" button and check the sample information.

![](figures/project_initiate.png)

## Data import

**Upload Ms file**

Before import the data, please ensure that the files are well anranged. Here is an example:

![](figures/MS1_files.png)

Click the dropdown button **Data import** and select **Start with MS file**.

![](figures/MS_start.png)


Then click **SELECT MS1 FOLDER** and choose the MS1 folder. Next, click **CHECK INPUT FILE** and you will see the number of files you have just uploaded.

![](figures/select_ms.png)

If the files are ready for analysis, you can begin to optimize peak picking parameters. The first step is to choose the ppmCut.

![](figures/optimization_part1.png)

And the second step is to run with the ppmCut. (need to scroll down to find the button)

![](figures/optimization_part2.png)

Finally, click **START PEAK PICKING** and get the results.

![](figures/peak_picking.png)












